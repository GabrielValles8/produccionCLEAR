{"version":3,"file":"component---src-pages-realizar-servicio-js-b5cc96baebbfe2a13203.js","mappings":"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","sources":["webpack://gatsby-starter-default/./src/pages/realizar-servicio.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\nimport { Col, Row, Container, Button, Card, Table, Accordion } from \"react-bootstrap\";\nimport { navigate } from \"gatsby\";\n\nimport \"../components/pages-css/sCita.css\";\nimport Layout from \"../components/layout.js\";\nimport Seo from \"../components/seo\";\nimport VideoSeccion from \"../components/videoSeccion.js\";\nimport ModalEmergente from \"../components/ModalEmergente.js\";\nimport Timer from \"../components/timer.js\";\nimport PlaceholderPaquete from \"../components/placeholderPaquete\";\nimport api from \"../components/actions/riveroapi.js\";\n\nexport default function RealizarServicio(){\n\n    const refForm = useRef();\n    const [click, setClick] = useState(false);\n    const [error, setError] = useState(0);\n    const [modal, setModal] = useState(false);\n    const [paquetes, setPaquetes] = useState({paquetes: {}})\n    const [ poliza, setPoliza ] = useState();\n    const [selected, setSelected] = useState({Clase: \"\", Precio: \"\", Id: \"\"});\n    const [mensajeModal, setMensajeModal] = useState(\"\");\n\n    const minira = [0];\n    const mapPlaceholder = minira.map((obj, i) => {\n        return(\n                <Row>\n                    <Col lg={4}>\n                        <PlaceholderPaquete/>\n                    </Col>\n                </Row>\n        )\n    })\n\n    useEffect(() => {\n        if (typeof window !== 'undefined') {\n            //console.log(\"tengo lo siguiente jiji: \", localStorage.getItem(\"RutaNavegacion\"))\n\n            let modelo = \"\";\n            let kilometros = 0;\n\n            if(localStorage.getItem(\"RutaNavegacion\") === \"sin-cita\"){\n                let datos = JSON.parse(localStorage.getItem(\"informacion\"))\n                modelo = datos.data.model;\n                kilometros = localStorage.getItem(\"Kilo\");\n\n            } else if (localStorage.getItem(\"RutaNavegacion\") === \"orden-reparacion\") {\n                let datos = JSON.parse(localStorage.getItem(\"informacion\"));\n                modelo = datos[0].car.model;\n                kilometros = localStorage.getItem(\"Kilo\");\n            } else if (localStorage.getItem(\"RutaNavegacion\") === \"nuevo-usuario\") {\n                let datos = JSON.parse(localStorage.getItem(\"informacion\"));\n                //console.log(datos);\n                modelo = datos.data.Modelo;\n                kilometros = datos.data.Kilometraje;\n            }\n\n            const params = {\n                modelo: modelo,\n                kilometros: kilometros,\n            }\n\n            //console.log(\"Tengo el kilometraje: \", params);\n\n            api.getPaquetesDisponible(params).then((resp) => {\n                \n                const paquetitos = resp.data?.paquetes;\n\n                if(paquetitos){\n                //console.log(\"Entra paquetes aquí\", resp);\n                    const sortPaquetes = paquetitos?.sort(function(a, b){return a.total - b.total});\n                    setPaquetes({\n                        ...paquetes,\n                        paquetes: sortPaquetes,\n                    });\n                } else {\n                //console.log(\"No entra paquetes aquí\", resp);\n                    setModal(true)\n                    setError(14);\n                    setMensajeModal(\n                        <center>\n                            <div>❌ Lo sentimos, no existen paquetes para el modelo: {params.modelo}</div>\n                            <p style={{marginBottom: 0}} className=\"texto-gris\">* Favor de contactar con un asesor. </p>\n                        </center>\n                    )\n                }\n                setPoliza(resp.data.poliza)\n            })\n            .catch((error) => {\n                //console.log(\"Error: \", error);\n            });\n\n        } else {\n            //console.log('we are running on the server');\n        }\n\n    }, []);\n\n    function continuar(){\n        console.log(\"Pulsado\", selected);\n    \n        if(selected.Clase >= 0) {\n            //console.log(\"Valor undefined\")\n            setError(13);\n            setModal(true);\n        } else {\n            //console.log(poliza?.clase.length)\n            localStorage.setItem(\"paqueteClase\", selected.Clase);\n            localStorage.setItem(\"paquetePrecio\", selected.Precio);\n            localStorage.setItem(\"paqueteId\", selected.Id);\n            \n            if(localStorage.getItem(\"RutaNavegacion\") === \"sin-cita\" || \"\"){\n                navigate(\"/comentarios-paquetes\");\n            } else {\n                navigate(\"/resumen-servicios\");\n            }\n        }\n    }\n\n    return(\n        <Layout backUrl={\"/servicio-a-realizar\"} poliza={poliza} setSelected={setSelected} selected={selected}>\n            <Seo title=\"Auto servicio\" />\n            <Container className=\"container-sin-cita\" onClick={() => {setClick(true)}}>\n            {/*<Timer click={click} setClick={setClick} setError={setError} setModal={setModal}/>*/}\n                <Row className=\"row-cita-arriba\">\n                    <div className=\"container-cita\">\n                        <Row>\n                            <Col className=\"titulo-cita\"><h1 className=\"titulo-h1\">Paquetes disponibles</h1></Col>\n                        </Row>\n                        <Col lg={12} className=\"titulo-cita\"><p className=\"texto-gris\" style={{marginBottom: 5}}>Seleccione un paquete.</p></Col>\n                            <Row style={{height: 620, position: 'relative'}} >\n                            {\n                                paquetes && paquetes.paquetes && paquetes.paquetes.length > 0 ? (\n\n                                    paquetes.paquetes.map((obj, index) => {\n                                        const subPaquete = obj.incluye;\n\n                                        return(\n                                        <label style={{width: '33%'}} key={index}>\n                                            <input class=\"item-check\" name=\"keywords[]\" type=\"radio\" value=\"1\" />\n                                            <Col style={{border: '0.5px solid #858796', margin: 5, padding: 5}} className=\"item-name\"\n                                                onClick={(e) => {\n                                                    //console.log(\"Pulsado jiji\")\n                                                    setSelected({\n                                                        ...selected,\n                                                        Clase: obj.clase,\n                                                        Precio: obj.total,\n                                                        Id: obj.id\n                                                    })}}>\n                                                <Col style={{background: 'white', padding: 10, borderRadius: 8}}>\n                                                    <div className=\"p-1\" style={{backgroundColor: '#17a2b8', color: 'white'}}>\n                                                        <center><h5 style={{marginTop: '0.5rem'}}>{obj.clase}</h5></center>\n                                                    </div>\n                                                    <div className=\"texto-azul\" style={{marginBottom: 25}}>\n                                                        <center><h3 style={{marginTop: '0.5rem'}}>$ {obj.total}</h3></center>\n                                                    </div>\n                                                    <strong>\n                                                        <center>25 PUNTOS DE SEGURIDAD</center>\n                                                    </strong>\n                                                    <div>\n                                                        {subPaquete.map((subObj, subIndex) => (\n                                                            <li key={subIndex} className=\"list-group-item fila-incluye\" style={{fontSize: 15, marginBottom: 0, margin: 7, justifyContent: 'flex-start', display: 'flex'}}><img style={{width: 20, height: 20, marginRight: 14, marginLeft: 14}} src={subObj.imagen}/>{subObj.nombre}</li>\n                                                        ))}\n                                                    </div>\n                                                </Col>\n                                            </Col>\n                                        </label>\n                                        )\n                                    })\n                                ): (\n                                    mapPlaceholder\n                                )\n                            }\n                        </Row>\n                    </div>\n                </Row>\n                <Button ref={refForm} onClick={() => continuar()} style={{display: 'none'}}></Button>\n                <Row className=\"row-cita-abajo\">\n                    <VideoSeccion refForm={refForm} none=\"tiene\"/>\n                </Row>\n            </Container>\n            <ModalEmergente modal={modal} error={error} setModal={setModal} registro={false} setClick={setClick} mensajeModal={mensajeModal}/>\n        </Layout>\n    )\n\n}"],"names":["RealizarServicio","refForm","useRef","useState","setClick","error","setError","modal","setModal","paquetes","setPaquetes","poliza","setPoliza","Clase","Precio","Id","selected","setSelected","mensajeModal","setMensajeModal","mapPlaceholder","map","obj","i","lg","useEffect","window","modelo","kilometros","localStorage","getItem","JSON","parse","data","model","car","datos","Modelo","Kilometraje","params","api","then","resp","paquetitos","sortPaquetes","sort","a","b","total","style","marginBottom","className","catch","backUrl","title","onClick","height","position","length","index","subPaquete","incluye","width","key","class","name","type","value","border","margin","padding","e","clase","id","background","borderRadius","backgroundColor","color","marginTop","subObj","subIndex","fontSize","justifyContent","display","marginRight","marginLeft","src","imagen","nombre","ref","console","log","setItem","navigate","none","registro"],"sourceRoot":""}